<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>图片切换</title>
    <style>
        /* 设置图片的宽度和高度 */
        img {
            width: 300px;
            height: 200px;
        }
        /* 设置按钮的样式 */
        button {
            margin: 10px;
            padding: 5px 10px;
            border: none;
            background-color: #f0f0f0;
            cursor: pointer;
        }
        /* 设置按钮的悬停效果 */
        button:hover {
            background-color: #e0e0e0;
        }
    </style>
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        <link href="main.css" rel="stylesheet">
        <link href="map.css" rel="stylesheet">
        <script src="main.js"></script>
        <script src="index.js"></script>
</head>
<body>
    <div class="container">
        <div class="md-md">
            <img id="img" src="default.jpg"> <!-- 默认图片 -->
            <input id="file" type="file" accept="image/*"> <!-- 选择图片的按钮 -->
            <script>
                // 获取图片对象和文件对象
                var img = document.getElementById("img");
                var file = document.getElementById("file");
                // 定义一个函数，用于将图片转换为base64编码的字符串
                function getBase64Image(img) {
                    var canvas = document.createElement("canvas");
                    canvas.width = img.width;
                    canvas.height = img.height;
                    var ctx = canvas.getContext("2d");
                    ctx.drawImage(img, 0, 0, img.width, img.height);
                    var dataURL = canvas.toDataURL("image/png");
                    return dataURL;
                }
        
                // 定义一个函数，用于将base64编码的字符串转换为图片
                function base64ToImage(base64) {
                    var image = new Image();
                    image.src = base64;
                    return image;
                }
        
                // 定义一个函数，用于从本地存储中读取图片链接，并设置给图片对象
                function loadImage() {
                    var imageSrc = localStorage.getItem("imageSrc"); // 从本地存储中获取图片链接
                    if (imageSrc) { // 如果存在图片链接
                        var image = base64ToImage(imageSrc); // 将图片链接转换为图片对象
                        img.src = image.src; // 设置图片对象的src属性为图片链接
                    }
                }
        
                // 定义一个函数，用于将图片链接保存到本地存储中
                function saveImage() {
                    var imageSrc = getBase64Image(img); // 将图片对象转换为图片链接
                    localStorage.setItem("imageSrc", imageSrc); // 将图片链接保存到本地存储中
                }
        
                // 为文件对象绑定onchange事件，当用户选择了图片时触发
                file.onchange = function() {
                    var reader = new FileReader(); // 创建一个文件读取器对象
                    reader.readAsDataURL(file.files[0]); // 读取用户选择的文件
                    reader.onload = function(e) { // 当文件读取完成时触发
                        img.src = e.target.result; // 设置图片对象的src属性为文件的内容
                        saveImage(); // 调用保存图片的函数
                    }
                }
            </script>
        </div>
        <div class="md-bt">
            <div class="md-bt-button md-bt-map" onclick="loadmap()">
                <img src="img/map1.svg">
                <div class="md-bt-font1">地图</div>
            </div>
            <div class="md-bt-button md-bt-weather" onclick="weather()">
                <img src="img/weather1.svg">
                <div class="md-bt-font2">天气</div>

            </div>
            <div class="md-bt-button md-bt-history" onclick="history()">
                <img src="img/history1.svg">
                <div class="md-bt-font3">历史</div>

            </div>
            <div class="md-bt-button md-bt-setting" onclick="loadsetting()">
                <img src="img/setting1.svg">
                <div class="md-bt-font4">设置</div>

            </div>
        </div>
    </div>


    <!-- 引入JavaScript代码 -->
    <script>

    </script>
</body>
</html>
